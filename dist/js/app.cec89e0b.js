(function(t){function e(e){for(var i,a,o=e[0],u=e[1],l=e[2],m=0,p=[];m<o.length;m++)a=o[m],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);c&&c(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,o=1;o<s.length;o++){var u=s[o];0!==n[u]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},n={app:0},r=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("64a9"),n=s.n(i);n.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("h1",[t._v("実績入力")]),s("input",{staticClass:"menu",attrs:{type:"button",value:"クリア"},on:{click:t.clearList}}),s("input",{staticClass:"menu",attrs:{type:"button",value:"テンプレ保存",title:"現在の内容をテンプレートとして保存します。"},on:{click:t.saveTemplate}}),s("input",{staticClass:"menu",attrs:{type:"button",value:"テンプレ呼出",title:"テンプレートをロードします。"},on:{click:t.loadTemplate}}),s("ul",[s("transition-group",t._l(t.scheduleList,(function(e,i){return s("schedule-list",{key:e.id,ref:i,refInFor:!0,attrs:{schedule:e,index:i,totalsize:t.scheduleList.length,categorylist:t.categoryList},on:{"insert-now-time":function(e){return t.insertNowTime(i)},"add-item":function(e){return t.addItem(i)},"copy-item":function(e){return t.copyItem(i)},"move-up-item":function(e){return t.moveUpItem(i)},"move-down-item":function(e){return t.moveDownItem(i)},"delete-item":function(e){return t.deleteItem(i)},"change-end-time":function(e){return t.onChangeEndTime(i)},"change-start-time":function(e){return t.onChangeStartTime(i)},"save-item":t.saveItem}})})),1)],1),s("input",{staticClass:"menu",attrs:{type:"button",value:"タイムライン出力",title:"入力されたリストをテンプレートに従って整形して出力します。"},on:{click:t.outputResult}}),s("input",{staticClass:"menu",attrs:{type:"button",value:"カテゴリ別サマリ出力",title:"カテゴリ別に経過時間を集約し、その結果を出力します。"},on:{click:t.outputSummaryResult}}),s("input",{staticClass:"menu",attrs:{type:"button",value:"両方とも出力",title:"タイムラインとカテゴリ別サマリの両方を出力します。"},on:{click:t.outputAllResult}}),s("input",{staticClass:"menu",attrs:{type:"button",value:"結果をクリップボードにコピー"},on:{click:t.copyResult}}),s("br"),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.outputStr,expression:"outputStr"}],attrs:{rows:"10",cols:"80"},domProps:{value:t.outputStr},on:{input:function(e){e.target.composing||(t.outputStr=e.target.value)}}}),s("div",{staticStyle:{"margin-top":"1em","align-content":"center"}},[t._v("\n    設定を表示する：\n    "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.showSettings,expression:"settings.showSettings"}],attrs:{type:"checkbox",id:"switchShowSettings"},domProps:{checked:Array.isArray(t.settings.showSettings)?t._i(t.settings.showSettings,null)>-1:t.settings.showSettings},on:{change:[function(e){var s=t.settings.showSettings,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&t.$set(t.settings,"showSettings",s.concat([r])):a>-1&&t.$set(t.settings,"showSettings",s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.settings,"showSettings",n)},t.onChangeSettings]}}),t._m(0)]),s("transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.settings.showSettings,expression:"settings.showSettings"}],attrs:{id:"settings"}},[s("h2",[t._v("設定")]),s("h3",[t._v("カテゴリ設定（1行に1項目）")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.categoryStr,expression:"categoryStr"}],attrs:{rows:"10",cols:"80"},domProps:{value:t.categoryStr},on:{change:t.onChangeCategoryStr,input:function(e){e.target.composing||(t.categoryStr=e.target.value)}}}),s("br"),s("br"),s("h3",[t._v("タイムライン出力テンプレート")]),s("p",[t._v("ヘッダ"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.outputTemplate.header,expression:"outputTemplate.header"}],attrs:{typeop:"text",size:"80",title:"出力の一番最初に1度だけ出力される文字列"},domProps:{value:t.outputTemplate.header},on:{change:t.onChangeOutputTemplate,input:function(e){e.target.composing||t.$set(t.outputTemplate,"header",e.target.value)}}})]),s("p",[t._v("本文"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.outputTemplate.body,expression:"outputTemplate.body"}],attrs:{type:"text",size:"80",title:"各項目ごとに出力される文字列"},domProps:{value:t.outputTemplate.body},on:{change:t.onChangeOutputTemplate,input:function(e){e.target.composing||t.$set(t.outputTemplate,"body",e.target.value)}}})]),s("p",[t._v("フッタ"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.outputTemplate.footer,expression:"outputTemplate.footer"}],attrs:{type:"text",size:"80",title:"出力の一番最後に1度だけ出力される文字列"},domProps:{value:t.outputTemplate.footer},on:{change:t.onChangeOutputTemplate,input:function(e){e.target.composing||t.$set(t.outputTemplate,"footer",e.target.value)}}})]),s("div",{staticClass:"enclosure"},[s("strong",[t._v("置換される文字列：")]),s("ul",[s("li",[t._v("{StartHour}：開始時刻（時）")]),s("li",[t._v("{StartMinutes}：開始時刻（分）")]),s("li",[t._v("{EndHour}：終了時刻（時）")]),s("li",[t._v("{EndMinutes}：終了時刻（分）")]),s("li",[t._v("{DurationHour}：経過時間（時）")]),s("li",[t._v("{DurationMinutes}：経過時間（分）")]),s("li",[t._v("{Category}：カテゴリ")]),s("li",[t._v("{Text}：内容")]),s("li",[t._v("{br}：改行")])])]),s("h3",[t._v("カテゴリ別サマリ出力テンプレート")]),s("p",[t._v("\n            ヘッダ"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.outputTemplate.summaryHeader,expression:"outputTemplate.summaryHeader"}],attrs:{typeop:"text",size:"80",title:"出力の一番最初に1度だけ出力される文字列"},domProps:{value:t.outputTemplate.summaryHeader},on:{change:t.onChangeOutputTemplate,input:function(e){e.target.composing||t.$set(t.outputTemplate,"summaryHeader",e.target.value)}}})]),s("p",[t._v("\n            本文"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.outputTemplate.summaryBody,expression:"outputTemplate.summaryBody"}],attrs:{type:"text",size:"80",title:"各項目ごとに出力される文字列"},domProps:{value:t.outputTemplate.summaryBody},on:{change:t.onChangeOutputTemplate,input:function(e){e.target.composing||t.$set(t.outputTemplate,"summaryBody",e.target.value)}}})]),s("p",[t._v("\n            フッタ"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.outputTemplate.summaryFooter,expression:"outputTemplate.summaryFooter"}],attrs:{type:"text",size:"80",title:"出力の一番最後に1度だけ出力される文字列"},domProps:{value:t.outputTemplate.summaryFooter},on:{change:t.onChangeOutputTemplate,input:function(e){e.target.composing||t.$set(t.outputTemplate,"summaryFooter",e.target.value)}}})]),s("div",{staticClass:"enclosure"},[s("strong",[t._v("置換される文字列：")]),s("ul",[s("li",[t._v("{SummaryHour}：カテゴリ別の集計時間（時）")]),s("li",[t._v("{SummaryMinutes}：カテゴリ別の集計時間（分）")]),s("li",[t._v("{Category}：カテゴリ")]),s("li",[t._v("{br}：改行")])])]),s("h3",[t._v("その他")]),s("div",{staticStyle:{"margin-top":"1em","align-content":"center"}},[t._v("\n                「両方を出力」時にカテゴリ別サマリを先に出力する：\n                "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.isSummaryFirstInAllOutput,expression:"settings.isSummaryFirstInAllOutput"}],attrs:{type:"checkbox",id:"switchIsSummaryFirst"},domProps:{checked:Array.isArray(t.settings.isSummaryFirstInAllOutput)?t._i(t.settings.isSummaryFirstInAllOutput,null)>-1:t.settings.isSummaryFirstInAllOutput},on:{change:[function(e){var s=t.settings.isSummaryFirstInAllOutput,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=null,a=t._i(s,r);i.checked?a<0&&t.$set(t.settings,"isSummaryFirstInAllOutput",s.concat([r])):a>-1&&t.$set(t.settings,"isSummaryFirstInAllOutput",s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.settings,"isSummaryFirstInAllOutput",n)},t.onChangeSettings]}}),s("label",{staticClass:"switch",attrs:{for:"switchIsSummaryFirst"}},[s("div")])])])])],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"switch",attrs:{for:"switchShowSettings"}},[s("div")])}],a=(s("28a5"),s("6b54"),s("a481"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"schedule-item",attrs:{id:t.schedule.id}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.schedule.start,expression:"schedule.start"}],attrs:{type:"time",disabled:!t.isTopItem,autocomplete:"on",title:"開始時刻"},domProps:{value:t.schedule.start},on:{change:function(e){return t.$emit("change-start-time")},input:function(e){e.target.composing||t.$set(t.schedule,"start",e.target.value)}}}),t._v(" - \n  "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.schedule.end,expression:"schedule.end"}],attrs:{type:"time",autocomplete:"on",title:"終了時刻"},domProps:{value:t.schedule.end},on:{change:function(e){return t.$emit("change-end-time")},input:function(e){e.target.composing||t.$set(t.schedule,"end",e.target.value)}}}),s("input",{staticClass:"menu",attrs:{type:"button",value:"⌚",title:"現在時刻を挿入（5分刻み）"},on:{click:function(e){return t.$emit("insert-now-time")}}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.schedule.category,expression:"schedule.category"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.schedule,"category",e.target.multiple?s:s[0])}}},t._l(t.categorylist,(function(e){return s("option",{key:e},[t._v("\n    "+t._s(e)+"\n  ")])})),0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.schedule.text,expression:"schedule.text"}],attrs:{type:"text",autocomplete:"on",title:"内容"},domProps:{value:t.schedule.text},on:{change:function(e){return t.$emit("save-item")},input:function(e){e.target.composing||t.$set(t.schedule,"text",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.schedule.duration,expression:"schedule.duration"}],attrs:{type:"text",disabled:"disabled",size:"5",title:"経過時間"},domProps:{value:t.schedule.duration},on:{input:function(e){e.target.composing||t.$set(t.schedule,"duration",e.target.value)}}}),s("input",{staticClass:"menu",attrs:{type:"button",value:"➕",title:"下に項目を追加"},on:{click:function(e){return t.$emit("add-item")}}}),s("input",{staticClass:"menu",attrs:{type:"button",value:"📋",title:"下に内容をコピーして項目を追加"},on:{click:function(e){return t.$emit("copy-item")}}}),s("input",{directives:[{name:"visible",rawName:"v-visible",value:!t.isTopItem,expression:"!isTopItem"}],staticClass:"menu",attrs:{type:"button",value:"🔼",title:"この内容を上に移動"},on:{click:function(e){return t.$emit("move-up-item")}}}),s("input",{directives:[{name:"visible",rawName:"v-visible",value:!t.isBottomItem,expression:"!isBottomItem"}],staticClass:"menu",attrs:{type:"button",value:"🔽",title:"この内容を下に移動"},on:{click:function(e){return t.$emit("move-down-item")}}}),s("input",{directives:[{name:"visible",rawName:"v-visible",value:t.isDeletableItem,expression:"isDeletableItem"}],staticClass:"menu",attrs:{type:"button",value:"❌",title:"この項目を削除"},on:{click:function(e){return t.$emit("delete-item")}}})])}),o=[],u={name:"ScheduleList",props:["schedule","index","totalsize","categorylist"],data:function(){return{isTopItem:!0,isBottomItem:!0,isDeletableItem:!1}},methods:{setItemState:function(){0==this.index?this.isTopItem=!0:this.isTopItem=!1,this.index==this.totalsize-1?this.isBottomItem=!0:this.isBottomItem=!1,this.totalsize>1?this.isDeletableItem=!0:this.isDeletableItem=!1}}},l=u,c=s("2877"),m=Object(c["a"])(l,a,o,!1,null,"c5c7bea6",null),p=m.exports;function h(){return"xxxxx".replace(/x/g,(function(){return(16*Math.random()|0).toString(16)}))}var d={name:"app",components:{ScheduleList:p},directives:{visible:{bind:function(t,e){t.style.visibility=e.value?"visible":"hidden"}}},data:function(){return{scheduleList:[{id:h(),start:"",end:"",duration:"",category:"",text:""}],outputStr:"",categoryStr:"",categoryList:["業務","休憩","その他"],outputTemplate:{header:"## 今日の実績{br}{br}",body:"- {StartHour}:{StartMinutes} - {EndHour}:{EndMinutes} 【{Category}】{Text} [{DurationHour}h{DurationMinutes}m]{br}",footer:"{br}",summaryHeader:"### 工数サマリ{br}{br}",summaryBody:"- {Category}：{SummaryHour}h{SummaryMinutes}m{br}",summaryFooter:"{br}"},settings:{showSettings:!1,isSummaryFirstInAllOutput:!1}}},methods:{clearList:function(){window.confirm("リストをクリアします。よろしいですか？")&&(this.scheduleList=[{id:h(),start:"",end:"",duration:"",category:"",text:""}])},saveTemplate:function(){window.confirm("現在のリストをテンプレートとして保存します。よろしいですか？")&&(localStorage.scheduleListTemplate=JSON.stringify(this.scheduleList))},loadTemplate:function(){window.confirm("テンプレートをロードして現在のリストを上書きします。よろしいですか？")&&(this.scheduleList=JSON.parse(localStorage.scheduleListTemplate))},addItem:function(t){this.scheduleList.splice(t+1,0,{id:h(),start:this.scheduleList[t].end,end:"",duration:"",category:"",text:""})},copyItem:function(t){this.addItem(t),this.scheduleList[t+1].text=this.scheduleList[t].text},replaceItem:function(t,e){var s=this.scheduleList[e],i=this.scheduleList[t].start,n=this.scheduleList[t].duration,r=this.scheduleList[e].duration;if(this.scheduleList.splice(e,1,this.scheduleList[t]),this.scheduleList.splice(t,1,s),this.scheduleList[t].start=i,""!=i&&""!=r){this.scheduleList[t].duration=r;var a=this.convertTimeStrToDate(i),o=r.split(":");a.setHours(a.getHours()+parseInt(o[0]),a.getMinutes()+parseInt(o[1])),this.scheduleList[t].end=("0"+a.getHours().toString()).slice(-2)+":"+("0"+a.getMinutes().toString()).slice(-2),this.scheduleList[e].start=this.scheduleList[t].end,""!=n&&(a=this.convertTimeStrToDate(this.scheduleList[e].start),o=n.split(":"),a.setHours(a.getHours()+parseInt(o[0]),a.getMinutes()+parseInt(o[1])),this.scheduleList[e].end=("0"+a.getHours().toString()).slice(-2)+":"+("0"+a.getMinutes().toString()).slice(-2))}},moveUpItem:function(t){this.$refs[t]["0"].isTopItem||this.replaceItem(t-1,t)},moveDownItem:function(t){this.$refs[t]["0"].isBottomItem||this.replaceItem(t,t+1)},deleteItem:function(t){window.confirm("アイテムを削除します。よろしいですか？")&&(this.$refs[t]["0"].isTopItem||this.$refs[t]["0"].isBottomItem||(this.scheduleList[t+1].start=this.scheduleList[t-1].end,this.getDurationTime(t+1)),this.scheduleList.splice(t,1))},setAllItemStates:function(){for(var t in this.$refs)null!=this.$refs[t]["0"]&&this.$refs[t]["0"].setItemState()},insertNowTime:function(t){var e=new Date,s=e.getHours(),i=e.getMinutes();i%5>=3&&(i+=5,i>=60&&(s++,s%=24,i%=60)),i-=i%5;var n=("0"+s.toString()).slice(-2),r=("0"+i.toString()).slice(-2);this.scheduleList[t].end=n+":"+r,this.onChangeEndTime(t)},convertTimeStrToDate:function(t){var e=new Date,s=new Date(e.getFullYear().toString()+"/"+(e.getMonth()+1).toString()+"/"+e.getDate().toString()+" "+t+":00");return s},getDurationTime:function(t){if(""!=this.scheduleList[t].start&&""!=this.scheduleList[t].end){var e=this.convertTimeStrToDate(this.scheduleList[t].start),s=this.convertTimeStrToDate(this.scheduleList[t].end);e>s&&s.setDate(s.getDate()+1);var i=Math.floor((s-e)/1e3/60),n=("0"+Math.floor(i/60).toString()).slice(-2),r=("0"+(i%60).toString()).slice(-2);this.scheduleList[t].duration=n.toString()+":"+r.toString()}},onChangeStartTime:function(t){this.getDurationTime(t),this.saveItem()},onChangeEndTime:function(t){this.$refs[t]["0"].isBottomItem||(this.scheduleList[t+1].start=this.scheduleList[t].end,this.getDurationTime(t+1)),this.getDurationTime(t),this.saveItem()},replaceOutputStr:function(t,e){var s=this.scheduleList[t].start.split(":"),i=this.scheduleList[t].end.split(":"),n=this.scheduleList[t].duration.split(":"),r=e.replace(/\{StartHour\}/g,s[0]).replace(/\{StartMinutes\}/g,s[1]).replace(/\{EndHour\}/g,i[0]).replace(/\{EndMinutes\}/g,i[1]).replace(/\{DurationHour\}/g,n[0]).replace(/\{DurationMinutes\}/g,n[1]).replace(/\{Category\}/g,this.scheduleList[t].category).replace(/\{Text\}/g,this.scheduleList[t].text).replace(/\{br\}/g,"\n");return r},outputResult:function(){for(var t in this.outputStr=this.replaceOutputStr(0,this.outputTemplate.header),this.scheduleList)this.outputStr+=this.replaceOutputStr(t,this.outputTemplate.body);this.outputStr+=this.replaceOutputStr(0,this.outputTemplate.footer)},replaceOutputSummaryStr:function(t,e,s){var i=("0"+(e%60).toString()).slice(-2),n=("0"+((e-i)/60).toString()).slice(-2),r=s.replace(/\{SummaryHour\}/g,n).replace(/\{SummaryMinutes\}/g,i).replace(/\{Category\}/g,t).replace(/\{br\}/g,"\n");return r},outputSummaryResult:function(){var t={};for(var e in this.scheduleList)t[this.scheduleList[e].category]=0;for(var s in this.scheduleList)if(""!=this.scheduleList[s].duration){var i=this.scheduleList[s].duration.split(":"),n=60*parseInt(i[0])+parseInt(i[1]);t[this.scheduleList[s].category]+=n}for(var r in this.outputStr=this.replaceOutputSummaryStr("カテゴリ未設定",0,this.outputTemplate.summaryHeader),t)this.outputStr+=this.replaceOutputSummaryStr(r,t[r],this.outputTemplate.summaryBody);this.outputStr+=this.replaceOutputSummaryStr("カテゴリ未設定",0,this.outputTemplate.summaryFooter)},outputAllResult:function(){this.outputResult();var t=this.outputStr;this.outputSummaryResult();var e=this.outputStr;this.settings.isSummaryFirstInAllOutput?this.outputStr=e+t:this.outputStr=t+e},outputJSON:function(){this.outputStr=JSON.stringify(this.scheduleList)},copyResult:function(){var t=document.getElementsByTagName("textarea")[0];t.select(),document.execCommand("copy")},saveItem:function(){localStorage.scheduleList=JSON.stringify(this.scheduleList)},onChangeOutputTemplate:function(){localStorage.outputTemplate=JSON.stringify(this.outputTemplate)},setCategoryStrToList:function(){this.categoryList=this.categoryStr.split("\n")},onChangeCategoryStr:function(){this.setCategoryStrToList(),localStorage.categoryList=JSON.stringify(this.categoryList)},onChangeSettings:function(){localStorage.settings=JSON.stringify(this.settings)}},mounted:function(){localStorage.scheduleList&&(this.scheduleList=JSON.parse(localStorage.scheduleList)),localStorage.outputTemplate&&(this.outputTemplate=JSON.parse(localStorage.outputTemplate)),localStorage.categoryList&&(this.categoryList=JSON.parse(localStorage.categoryList)),localStorage.settings&&(this.settings=JSON.parse(localStorage.settings)),this.categoryStr="";for(var t=0;t<this.categoryList.length;t++)this.categoryStr+=this.categoryList[t],t<this.categoryList.length-1&&(this.categoryStr+="\n")},updated:function(){this.$nextTick((function(){this.setAllItemStates()}))},watch:{scheduleList:function(){this.saveItem()}}},g=d,v=(s("034f"),Object(c["a"])(g,n,r,!1,null,null,null)),y=v.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(y)}}).$mount("#app")},"64a9":function(t,e,s){}});
//# sourceMappingURL=app.cec89e0b.js.map